# 🍔 سرور بوفینو (Boofino)

این سرور برای پروژه [بوفینو](https://github.com/MohsenAbediDev/Boofino#) می‌باشد که شامل جدول دسترسی Route ها نیز هست.

---

## 🚀ویژگی‌های کلیدی
- احراز هویت کاربران و مدیریت نشست‌ها
- عملیات CRUD برای ادمین
- نقاط دسترسی امن با استفاده از Middleware (مانند `helmet` و محدودیت نرخ)
- مدیریت محصولات
- پردازش سفارشات

---

## 🛠️ نحوه نصب و راه‌اندازی
1. نصب وابستگی‌ها:
   ```bash
   npm install
   ```

2. سرویس MongoDB را راه‌اندازی کنید.

3. سرور را اجرا کنید:
   ```bash
   node server.js
   ```

4. سرور در آدرس `http://localhost:3000` در دسترس خواهد بود.

---

## جدول مسیرها

| HTTP | Route | Description | Body | Response |
|------------|---------------------------|---------------------------------------------|---------------------------------------------------------------------------------------------|------------------|
| `GET` | `/user`                   | دریافت اطلاعات کاربر               | ندارد | جزئیات کاربر یا پیام خطا. |
| `PUT` | `/user`                   | به‌روزرسانی پروفایل کاربر          | `{ fullname, username, password, phonenumber, imgUrl, wallet, schoolId }`                   | پیام موفقیت یا خطا. |
| `POST` | `/register`               | ثبت نام یک کاربر جدید                       | `{ fullname, username, password, confirmpassword, phonenumber, imgUrl }`                    | پیام موفقیت یا خطا. |
| `POST` | `/login`                  | ورود کاربر                         | `{ username, password }`                                                                    | پیام موفقیت یا خطا. |
| `GET` | `/logout`                 | خروج کاربر                         | ندارد | پیام موفقیت.      |
| `POST` | `/discount`               | ثبت کد تخفیف روی محصولات                    | `{ code }`                                                                                  | درصد تخفیف یا پیام خطا. |
| `POST` | `/buyproducts`            | ثبت سفارش توسط کاربر                         | `{ products, totalPrice }`                                                                  | پیام موفقیت و کد رهگیری یا پیام خطا. |
| `GET` | `/userorders`             | دریافت تمامی سفارشات کاربر                  | ندارد | لیست سفارشات یا پیام خطا. |
| `GET` | `/schoolorders`           | دریافت تمامی سفارشات مدرسه                  | ندارد | لیست سفارشات یا پیام خطا. |
| `GET` | `/order/:trackingCode`    | دریافت جزئیات سفارش با کد رهگیری            | ندارد | اطلاعات سفارش یا پیام خطا. |
| `PUT` | `/order/:trackingCode/status` | به‌روزرسانی وضعیت سفارش                     | `{ status }`                                                                                | پیام موفقیت یا خطا. |
| `POST` | `/addproduct`             | افزودن محصول جدید به مدرسه                  | `{ name, imgUrl, price, off, group, finalPrice, sellCount, itemCount, freeTime, oldPrice, isDiscount }` | پیام موفقیت یا خطا. |
| `PUT` | `/editproduct/:name`      | ویرایش اطلاعات محصول مشخص شده               | `{ name, imgUrl, price, off, group, finalPrice, sellCount, itemCount, dateTime, freeTime, oldPrice, isDiscount }` | پیام موفقیت یا خطا. |
| `DELETE` | `/deleteproduct/:name`    | حذف یک محصول مشخص                           | ندارد | پیام موفقیت یا خطا. |
| `DELETE` | `/deleteproducts`         | حذف محصولات با لیست نام                     | `{ productNames }`                                                                          | پیام موفقیت یا خطا. |
| `GET` | `/products`               | دریافت لیست محصولات مدرسه                   | ندارد | لیست محصولات یا پیام خطا. |
| `GET` | `/product/:name`          | دریافت اطلاعات محصول با نام                  | ندارد | اطلاعات محصول یا پیام خطا. |
| `GET` | `/search-products/:name`  | جستجوی محصولات                              | ندارد | لیست محصولات جستجو شده یا پیام خطا. |
| `GET` | `/schools`                | دریافت لیست مدارس                           | ندارد | لیست مدارس یا پیام خطا. |
| `POST` | `/search-schools`         | جستجوی مدارس                                | `{ city, state, name }`                                                                     | لیست مدارس جستجو شده یا پیام خطا. |
| `POST` | `/uploadimg`              | آپلود تصویر به سرور                         | فرم دیتا شامل فایل تصویر                                                                  | پیام موفقیت یا خطا. |

---

## فناوری‌های استفاده شده
- **Express.js**: برای ساخت سرور و تعریف مسیرها.
- **MongoDB**: به عنوان پایگاه داده برای ذخیره اطلاعات کاربران، مدارس و سفارشات.
- **Mongoose**: برای مدل‌سازی اسکیمای پایگاه داده.
- **express-session**: برای مدیریت نشست کاربران.
- **bcrypt**: برای هش‌کردن امن رمز عبور.
- **helmet**: برای افزایش امنیت.
- **body-parser**: برای پردازش بدنه درخواست‌ها.
- **Rate Limiting**: برای جلوگیری از سوءاستفاده از API.

---